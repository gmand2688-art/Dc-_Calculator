<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DC Cable Design - Load vs Fuse</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 20px; max-width: 900px; background-color: #f4f7f6; color: #333; }
    .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
    h2 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
    .row { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px; }
    .input-group { display: flex; flex-direction: column; flex: 1; min-width: 200px; }
    label { font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #555; }
    input, select { padding: 12px; border: 1px solid #ccc; border-radius: 6px; }
    
    /* Style Î³Î¹Î± Ï„Î¿ ÎºÎ¿Ï…Î¼Ï€Î¯ ÎµÏ€Î¹Î»Î¿Î³Î®Ï‚ (Mode Switch) */
    .mode-selector { display: flex; background: #eee; border-radius: 8px; padding: 5px; margin-bottom: 20px; }
    .mode-btn { flex: 1; padding: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
    .active { background: #3498db; color: white; }
    
    .btn-calc { background: #27ae60; color: white; padding: 15px; border: none; border-radius: 8px; width: 100%; font-size: 18px; cursor: pointer; }
    .out { background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; margin-top: 20px; }
    .highlight { color: #f1c40f; }
  </style>
</head>
<body>

<div class="card">
  <h2>âš¡ Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î“ÏÎ±Î¼Î¼Î®Ï‚ DC</h2>
  
  <label>Î¤Î¹ Î±Î½Ï„Î¹Ï€ÏÎ¿ÏƒÏ‰Ï€ÎµÏÎ¿Ï…Î½ Ï„Î± Amper Ï€Î¿Ï… Î¸Î± Î²Î¬Î»ÎµÎ¹Ï‚;</label>
  <div class="mode-selector">
    <button id="modeLoad" class="mode-btn active" onclick="setMode('load')">Î ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® ÎšÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ·</button>
    <button id="modeFuse" class="mode-btn" onclick="setMode('fuse')">ÎŸÎ½Î¿Î¼Î±ÏƒÏ„Î¹ÎºÎ® Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±</button>
  </div>

  <div class="row">
    <div class="input-group">
      <label id="ampLabel">ÎˆÎ½Ï„Î±ÏƒÎ· ÎšÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ·Ï‚ (A)</label>
      <input id="inputAmps" type="number" value="80">
    </div>
    <div class="input-group">
      <label>Î¤Î¬ÏƒÎ· Î£Ï…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ (V)</label>
      <input id="voltage" type="number" value="48">
    </div>
  </div>

  <div class="row">
    <div class="input-group">
      <label>ÎœÎ®ÎºÎ¿Ï‚ Î“ÏÎ±Î¼Î¼Î®Ï‚ (m)</label>
      <input id="length" type="number" value="15">
    </div>
    <div class="input-group">
      <label>Î•Ï€Î¹Ï„ÏÎµÏ€Ï„Î® Î Ï„ÏÏƒÎ· Î¤Î¬ÏƒÎ·Ï‚ (%)</label>
      <input id="vDropLimit" type="number" value="4">
    </div>
  </div>

  <button class="btn-calc" onclick="calculate()">Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚</button>

  <div id="results" class="out">Î¤Î± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± Î¸Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„Î¿ÏÎ½ ÎµÎ´Ï...</div>
</div>

<script>
  let currentMode = 'load';
  const WIRE_DB = [
    {s: 1.5, maxI: 15}, {s: 2.5, maxI: 21}, {s: 4, maxI: 28}, {s: 6, maxI: 36}, 
    {s: 10, maxI: 50}, {s: 16, maxI: 68}, {s: 25, maxI: 89}, {s: 35, maxI: 110}, 
    {s: 50, maxI: 134}, {s: 70, maxI: 171}, {s: 95, maxI: 207}
  ];
  const FUSES = [6, 10, 16, 20, 25, 32, 40, 50, 63, 80, 100, 125];

  function setMode(mode) {
    currentMode = mode;
    document.getElementById('modeLoad').classList.toggle('active', mode === 'load');
    document.getElementById('modeFuse').classList.toggle('active', mode === 'fuse');
    document.getElementById('ampLabel').innerText = mode === 'load' ? "ÎˆÎ½Ï„Î±ÏƒÎ· ÎšÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ·Ï‚ (A)" : "ÎŸÎ½Î¿Î¼Î±ÏƒÏ„Î¹ÎºÎ® Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î± (A)";
  }

  function calculate() {
    const I_input = parseFloat(document.getElementById('inputAmps').value);
    const V = parseFloat(document.getElementById('voltage').value);
    const L = parseFloat(document.getElementById('length').value);
    const dropLimit = parseFloat(document.getElementById('vDropLimit').value);
    const gamma = 59.5; // Î§Î±Î»ÎºÏŒÏ‚

    let targetLoad, targetFuse;

    if (currentMode === 'load') {
      targetLoad = I_input;
      // Î ÏÎ¿Ï„ÎµÎ¯Î½Î¿Ï…Î¼Îµ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± 1.25x Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿ Ï†Î¿ÏÏ„Î¯Î¿
      targetFuse = FUSES.find(f => f >= targetLoad * 1.25) || "Custom";
    } else {
      targetFuse = I_input;
      targetLoad = I_input; // Î£Ï„Î·Î½ Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ· Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚, ÎµÎ»Î­Î³Ï‡Î¿Ï…Î¼Îµ Ï„Î·Î½ Ï€Ï„ÏÏƒÎ· Ï„Î¬ÏƒÎ·Ï‚ ÏƒÏ„Î¿ Î¼Î­Î³Î¹ÏƒÏ„Î¿ ÏÎµÏÎ¼Î± Ï„Î·Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚
    }

    // 1. Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î”Î¹Î±Ï„Î¿Î¼Î®Ï‚ Î²Î¬ÏƒÎµÎ¹ Î Ï„ÏÏƒÎ·Ï‚ Î¤Î¬ÏƒÎ·Ï‚ (Î”U = 2*L*I / Î³*A)
    const maxDropV = V * (dropLimit / 100);
    const s_drop = (2 * L * targetLoad) / (gamma * maxDropV);

    // 2. Î•Ï€Î¹Î»Î¿Î³Î® ÎºÎ±Î»Ï‰Î´Î¯Î¿Ï… Ï€Î¿Ï… Î½Î± ÎºÎ±Î»ÏÏ€Ï„ÎµÎ¹ ÎšÎ‘Î™ Ï„Î·Î½ Ï€Ï„ÏÏƒÎ· Ï„Î¬ÏƒÎ·Ï‚ ÎšÎ‘Î™ Ï„Î· Î¸ÎµÏÎ¼Î¹ÎºÎ® Î±Î½Ï„Î¿Ï‡Î® Ï„Î·Ï‚ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î±Ï‚
    let wire = WIRE_DB.find(w => w.s >= s_drop && w.maxI >= (typeof targetFuse === 'number' ? targetFuse : targetLoad));

    if (!wire) {
      document.getElementById('results').innerHTML = "âš ï¸ Î¤Î¿ Ï†Î¿ÏÏ„Î¯Î¿/Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï Î¼ÎµÎ³Î¬Î»Î¿ Î³Î¹Î± Ï„Î¹Ï‚ Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼ÎµÏ‚ Î´Î¹Î±Ï„Î¿Î¼Î­Ï‚.";
      return;
    }

    const actualDropV = (2 * L * targetLoad) / (gamma * wire.s);
    const actualDropPct = (actualDropV / V) * 100;

    let res = `Î‘Î ÎŸÎ¤Î•Î›Î•Î£ÎœÎ‘Î¤Î‘ (Mode: ${currentMode === 'load' ? 'ÎšÎ±Ï„Î±Î½Î¬Î»Ï‰ÏƒÎ·' : 'Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î±'})\n`;
    res += `------------------------------------------\n`;
    res += `Î•Î Î™Î›Î•Î“ÎœÎ•ÎÎŸ ÎšÎ‘Î›Î©Î”Î™ÎŸ:  <span class="highlight">${wire.s} mmÂ²</span>\n`;
    res += `ÎŸÎÎŸÎœÎ‘Î£Î¤Î™ÎšÎ— Î‘Î£Î¦Î‘Î›Î•Î™Î‘:  <span class="highlight">${targetFuse} A</span>\n`;
    res += `Î˜Î•Î¡ÎœÎ™ÎšÎ— Î‘ÎÎ¤ÎŸÎ§Î—:      ${wire.maxI} A\n`;
    res += `------------------------------------------\n`;
    res += `Î Î¤Î©Î£Î— Î¤Î‘Î£Î—Î£:         ${actualDropV.toFixed(2)} V (${actualDropPct.toFixed(2)}%)\n`;
    
    if (currentMode === 'fuse') {
      res += `\nğŸ’¡ Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·: Î¤Î¿ ÎºÎ±Î»ÏÎ´Î¹Î¿ ÎµÏ€Î¹Î»Î­Ï‡Î¸Î·ÎºÎµ ÏÏƒÏ„Îµ Î½Î± Î±Î½Ï„Î­Ï‡ÎµÎ¹ \nÏ€Î»Î®ÏÏ‰Ï‚ Ï„Î·Î½ Î±ÏƒÏ†Î¬Î»ÎµÎ¹Î± Ï„Ï‰Î½ ${targetFuse}A Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± ÎºÎ±ÎµÎ¯.`;
    }

    document.getElementById('results').innerHTML = res;
  }
</script>

</body>
</html>
